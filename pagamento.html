<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pagamento - Pizzaria Fornalha 76</title>
  <style>
    body { background:#111; color:#fff; font-family: Arial; text-align:center; margin:0; padding:0; }
    h1 { color:#FFD700; margin-top:20px; }
    .form {
      background:#222;
      padding:20px;
      border-radius:10px;
      margin:20px;
      max-width:400px;
      margin-left:auto;
      margin-right:auto;
      box-shadow:0 0 10px #000;
    }
    input, select {
      width:90%;
      padding:10px;
      margin:10px 0;
      border:none;
      border-radius:5px;
      font-size:15px;
    }
    button {
      background:#FFD700;
      border:none;
      padding:15px;
      width:95%;
      margin-top:15px;
      border-radius:8px;
      font-size:16px;
      cursor:pointer;
      color:#000;
      font-weight:bold;
    }
    button:hover { background:#e6c200; }
    #pixInfo, #trocoInfo { display:none; margin-top:10px; }
  </style>
</head>
<body>
  <h1>üí≥ Pagamento</h1>

  <div class="form">
    <input type="text" id="nome" placeholder="Nome Completo" required>
    <input type="text" id="telefone" placeholder="Telefone" required>
    <input type="text" id="endereco" placeholder="Endere√ßo" required>

    <select id="pagamento" onchange="mostrarOpcoes()">
      <option disabled selected>Selecione a forma de pagamento</option>
      <option value="Pix">Pix</option>
      <option value="Cart√£o">Cart√£o</option>
      <option value="Dinheiro">Dinheiro</option>
    </select>

    <div id="pixInfo">üîë Chave Pix: <b>08757823537</b></div>
    <div id="trocoInfo"><input type="text" id="troco" placeholder="Troco para quanto?"></div>

    <button onclick="enviarWhatsApp()">üì≤ Enviar Pedido pelo WhatsApp</button>
  </div>

  <script>
    function mostrarOpcoes() {
      const pagamento = document.getElementById("pagamento").value;
      document.getElementById("pixInfo").style.display = pagamento === "Pix" ? "block" : "none";
      document.getElementById("trocoInfo").style.display = pagamento === "Dinheiro" ? "block" : "none";
    }

    function enviarWhatsApp() {
      const nome = document.getElementById("nome").value.trim();
      const telefone = document.getElementById("telefone").value.trim();
      const endereco = document.getElementById("endereco").value.trim();
      const pagamento = document.getElementById("pagamento").value;
      const troco = document.getElementById("troco") ? document.getElementById("troco").value.trim() : "";

      // Recupera dados do pedido do localStorage
      let sabor = localStorage.getItem("saborPizza");
      let tamanho = localStorage.getItem("tamanhoPizza");
      let preco = localStorage.getItem("precoPizza");

      // Verifica√ß√£o se os dados existem
      if (!sabor || !tamanho || !preco) {
        alert("‚ö†Ô∏è Faltam informa√ß√µes do pedido (sabor, tamanho ou pre√ßo). Volte ao card√°pio e selecione a pizza novamente!");
        sabor = "N√£o informado";
        tamanho = "N√£o informado";
        preco = "R$ 0,00";
      }

      // C√°lculo total (entrega R$4,00)
      const entrega = 4.00;
      const precoNumero = parseFloat(preco.replace("R$", "").replace(",", "."));
      const total = (precoNumero + entrega).toFixed(2);

      // Mensagem formatada para WhatsApp
      const mensagem = `
------------------------------
üçï *Novo Pedido - Pizzaria Fornalha 76* üçï
------------------------------
üì¶ *Sabor:* ${sabor}
üìè *Tamanho:* ${tamanho}
üíµ *Valor da Pizza:* ${preco}
üöö *Entrega:* R$ ${entrega.toFixed(2)}
üí∞ *TOTAL:* R$ ${total}
------------------------------
üí≥ *Pagamento:* ${pagamento}${troco ? ` (troco para R$${troco})` : ""}
üë§ *Nome:* ${nome}
üìû *Telefone:* ${telefone}
üìç *Endere√ßo:* ${endereco}
üïí *Pedido √†s:* ${new Date().toLocaleTimeString()}
------------------------------
`;

      // Enviar via WhatsApp
      const numeroWhatsApp = "5574999041959"; // n√∫mero da pizzaria
      const url = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(mensagem)}`;
      window.open(url, "_blank");
    }

    // Log para depura√ß√£o (ver se os dados vieram)
    console.log("üì¶ Dados salvos no localStorage:");
    console.log("Sabor:", localStorage.getItem("saborPizza"));
    console.log("Tamanho:", localStorage.getItem("tamanhoPizza"));
    console.log("Pre√ßo:", localStorage.getItem("precoPizza"));
  </script>
</body>
</html>
