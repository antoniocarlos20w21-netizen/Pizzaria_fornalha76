<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cardápio Delivery</title>
  <style>
    .item-carrinho { margin: 5px 0; }
    .tab.active { font-weight: bold; }
  </style>
</head>
<body>
  <div id="cardapio">
    <!-- Exemplo: escolha de borda -->
    <label for="borda">Borda:</label>
    <select id="borda">
      <option value="">Sem borda</option>
      <option value="Cheddar">Cheddar</option>
      <option value="Catupiry">Catupiry</option>
    </select>
  </div>

  <div id="carrinho"></div>
  <div id="total"></div>

  <label for="nome">Nome:</label><input id="nome" type="text"><br>
  <label for="telefone">Telefone:</label><input id="telefone" type="text"><br>
  <label for="endereco">Endereço:</label><input id="endereco" type="text"><br>

  <label for="pagamento">Pagamento:</label>
  <select id="pagamento">
    <option value="Dinheiro">Dinheiro</option>
    <option value="Pix">Pix</option>
  </select>

  <div id="troco-container" hidden>
    <label for="troco">Troco para:</label><input id="troco" type="number">
  </div>

  <div id="pix-container" hidden>
    <p>Chave Pix: <span id="pix-chave">suachavepix</span></p>
    <button id="copiar-pix">Copiar chave</button>
    <button id="confirmar-pix">Confirmar pagamento</button>
  </div>

  <button onclick="finalizarPedido()">Finalizar Pedido</button>

  <script>
    let carrinho=[];
    let taxaEntrega=5;
    let pixChave="suachavepix";
    let pixConfirmado=false;

    function atualizarCarrinho(){
      const container=document.getElementById("carrinho");
      container.innerHTML="";
      let total=0;
      carrinho.forEach((item,i)=>{
        let subtotal=item.preco*item.quantidade;
        total+=subtotal;
        container.innerHTML+=`
          <div class="item-carrinho">
            <span>${item.quantidade}x ${item.nome} 
              ${item.tamanho? "(" + item.tamanho + ")" : ""} 
              ${item.sabor? "(" + item.sabor + ")" : ""} 
              ${item.borda? "(Borda: " + item.borda + ")" : ""} 
              - R$${subtotal},00
            </span>
            <button onclick="removerItem(${i})">Remover</button>
          </div>`;
      });
      document.getElementById("total").innerText=`Total: R$${total+taxaEntrega},00 (c/ entrega)`;
    }

    function removerItem(i){ carrinho.splice(i,1); atualizarCarrinho(); }

    document.querySelectorAll(".tab").forEach(tab=>{
      tab.addEventListener("click",()=>{
        document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
        tab.classList.add("active");
        const alvo = tab.dataset.tab;
        document.querySelectorAll(".item-cardapio").forEach(item=>{
          item.classList.remove("show");
          if(item.dataset.tab===alvo) item.classList.add("show");
        });
      });
    });

    document.querySelector(".tab.active")?.click();
    document.getElementById("pagamento").addEventListener("change",function(){
      document.getElementById("troco-container").hidden=this.value!=="Dinheiro";
      document.getElementById("pix-container").hidden=this.value!=="Pix";
    });
    document.getElementById("copiar-pix").addEventListener("click",()=>{navigator.clipboard.writeText(pixChave); alert("Chave Pix copiada!");});
    document.getElementById("confirmar-pix").addEventListener("click",()=>{pixConfirmado=true; alert("Pagamento via Pix confirmado ✅");});

    // Função exemplo de adicionar item (adicione onde já chama no seu menu)
    function adicionarAoCarrinho(nome, preco, tamanho="", sabor=""){
      const borda = document.getElementById("borda").value; // pega a borda escolhida
      carrinho.push({nome, preco, quantidade:1, tamanho, sabor, borda});
      atualizarCarrinho();
    }

    function finalizarPedido(){
      if(carrinho.length===0){ alert("Seu carrinho está vazio!"); return; }
      const nome=document.getElementById("nome").value;
      const tel=document.getElementById("telefone").value;
      const end=document.getElementById("endereco").value;
      const pagamento=document.getElementById("pagamento").value;
      let total= carrinho.reduce((s,it)=>s+(it.preco*it.quantidade),0)+taxaEntrega;
      let texto=`Pedido às ${new Date().toLocaleTimeString()}\nNome: ${nome}\nTelefone: ${tel}\nEndereço: ${end}\n\n------------------------------\n`;
      carrinho.forEach(item=>{
        let subtotal=item.preco*item.quantidade;
        texto+=`${item.quantidade}x ${item.nome} 
                 ${item.tamanho? "(" + item.tamanho + ")" : ""} 
                 ${item.sabor? "(" + item.sabor + ")" : ""} 
                 ${item.borda? "(Borda: " + item.borda + ")" : ""} 
                 - R$${subtotal},00\n`;
      });
      texto+="------------------------------\n";
      texto+=`Itens: R$${total-taxaEntrega},00\nEntrega: R$${taxaEntrega},00\nTOTAL: R$${total},00\n\nPagamento: ${pagamento}\n`;
      if(pagamento==="Pix"){ texto+=`Chave Pix: ${pixChave}\n${pixConfirmado?"✅ Pagamento Pix confirmado!":""}`; }
      if(pagamento==="Dinheiro"){ let troco=document.getElementById("troco").value; if(troco) texto+=`Troco para: R$${troco},00\n`; }
      window.open("https://wa.me/5574999041959?text="+encodeURIComponent(texto),"_blank");
    }
  </script>
</body>
</html>        
